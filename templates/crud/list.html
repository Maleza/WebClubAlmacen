{% extends 'crud/base.html' %}

{% block content %}

<div class="list-header">
  <h2 class="list-title">{{ title }}</h2>

  {% if user.is_authenticated and can_create %}
  <a href="{% url create_url %}" class="btn-create">+ Crear</a>
  {% endif %}
</div>

<div class="list-grid">

  {% for obj in objects %}
  <div class="list-card">
    {% if obj.imagen %}
    <div class="list-thumb">
      <img src="{{ obj.imagen.url }}" class="list-thumb-img" alt="{{ obj }}">
    </div>
    {% else %}
    <div class="list-thumb no-img">
      <span>Sin imagen</span>
    </div>
    {% endif %}


    <div class="list-body">

      <h3 class="list-card-title">{{ obj }}</h3>

      {% if obj.resumen %}
      <p class="list-text">{{ obj.resumen|truncatewords:20 }}</p>
      {% elif obj.descripcion %}
      <p class="list-text">{{ obj.descripcion|truncatewords:20 }}</p>
      {% elif obj.contenido %}
      <p class="list-text">{{ obj.contenido|truncatewords:20 }}</p>
      {% endif %}

      <div class="list-actions">
        <a href="{% url detail_url obj.pk %}" class="btn-view">Ver</a>

        <div class="list-buttons">
          {% if can_edit %}
          <a href="{% url edit_url obj.pk %}" class="btn-edit">Editar</a>
          {% endif %}

          {% if can_delete %}
          <a href="{% url delete_url obj.pk %}" class="btn-delete">Eliminar</a>
          {% endif %}
        </div>
      </div>

    </div>
  </div>
  {% empty %}
  <p class="empty-msg">No hay elementos.</p>
  {% endfor %}

</div>

{% endblock %}